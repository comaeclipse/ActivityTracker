# **Workout Logger - Complete High-Level Overview**

## **ğŸ¯ What We're Building**

An internal web app where coworkers can anonymously log workouts, track hydration, monitor weight, and see each other's activity in a social feed. Think: old-school Facebook meets fitness tracker.

---

## **ğŸ—ï¸ Architecture**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Next.js App (Port 3000)         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Frontend (React Components)      â”‚  â”‚
â”‚  â”‚  - Activity Feed                  â”‚  â”‚
â”‚  â”‚  - Hydration Charts               â”‚  â”‚
â”‚  â”‚  - Status Bar                     â”‚  â”‚
â”‚  â”‚  - Weight Tracker                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                  â†•                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  API Routes (/app/api/*)          â”‚  â”‚
â”‚  â”‚  - POST /api/activities           â”‚  â”‚
â”‚  â”‚  - GET  /api/feed                 â”‚  â”‚
â”‚  â”‚  - POST /api/auth/signup          â”‚  â”‚
â”‚  â”‚  - POST /api/weight               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                  â†•                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Prisma ORM                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†•
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   PostgreSQL DB      â”‚
        â”‚  - users             â”‚
        â”‚  - activities        â”‚
        â”‚  - weight_logs       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## **ğŸ› ï¸ Tech Stack**

| Layer | Technology | Why |
|-------|-----------|-----|
| **Framework** | Next.js 14 (App Router) | Full-stack React, API routes built-in |
| **Language** | TypeScript | Catch bugs before they happen |
| **Database** | PostgreSQL | Reliable, handles relationships well |
| **ORM** | Prisma | Type-safe DB queries, easy migrations |
| **Auth** | NextAuth.js | Session management out-of-box |
| **UI Components** | Shadcn/ui + Tailwind | Copy-paste beautiful components |
| **Charts** | Recharts | React-native, easy to customize |
| **Deployment** | Vercel (app) + Railway (DB) | Free tier, auto-deploys |

---

## **ğŸ“Š Database Schema**

```prisma
model User {
  id                    String        @id @default(cuid())
  username              String        @unique
  password              String        // bcrypt hashed
  showWeightPublicly    Boolean       @default(false)
  createdAt             DateTime      @default(now())
  
  activities            Activity[]
  weightLogs            WeightLog[]
}

model Activity {
  id            String        @id @default(cuid())
  userId        String
  user          User          @relation(fields: [userId], references: [id])
  
  type          ActivityType  // enum: RUN, WALK, SWIM, WEIGHTS, BIKE, HYDRATION
  value         Float         // miles, minutes, ounces
  unit          String        // "miles", "minutes", "oz"
  notes         String?       // optional user note
  
  createdAt     DateTime      @default(now())
}

model WeightLog {
  id            String        @id @default(cuid())
  userId        String
  user          User          @relation(fields: [userId], references: [id])
  
  weight        Float
  unit          String        @default("lbs")
  isPublic      Boolean       @default(false)
  
  createdAt     DateTime      @default(now())
}

enum ActivityType {
  RUN
  WALK
  SWIM
  WEIGHTS
  BIKE
  HYDRATION
}
```

---

## **ğŸ¨ Key Pages & Features**

### **1. Homepage (`/`)**
- **Activity Feed** (center)
  - Real-time stream of all user activities
  - "QuickTiger89 ran 3.5 miles - 2 hours ago"
  - "BraveWolf42 drank 16oz water - 5 minutes ago"
- **Status Bar** (top)
  - Facebook-style "What are you up to?" input
  - Quick buttons: +8oz Water, Log Run, Log Bike, etc.
- **Hydration Chart** (sidebar)
  - Bar chart showing today's water intake per user
  - Color-coded by username

### **2. Registration/Login (`/auth`)**
- **Sign Up Flow:**
  1. Click "Create Account"
  2. System generates random username (e.g., "SwiftPanda23")
  3. Shows generated password OR lets user choose their own
  4. Account created, auto-logged in
- **Login:**
  - Enter username + password
  - Session stored in cookie

### **3. Profile Page (`/profile`)**
- View your activity history
- **Weight Tracker:**
  - Line chart of weight over time
  - Toggle: "Make weight public" checkbox
  - Log new weight entry
- Personal stats dashboard

### **4. Hydration Dashboard (`/hydration`)**
- Interactive chart showing all users' water intake
- Time period filters (Today, This Week, This Month)
- Leaderboard (optional)
- Big "+8oz" button

---

## **ğŸ”‘ Key Features Breakdown**

### **Anonymous Registration**
```typescript
// Auto-generates usernames like:
const adjectives = ['Quick', 'Brave', 'Swift', 'Bold', 'Mighty'];
const animals = ['Tiger', 'Wolf', 'Eagle', 'Bear', 'Fox'];
const randomNum = Math.floor(Math.random() * 100);

username = `${adjective}${animal}${randomNum}`; // "BraveWolf42"

// Generates random password or accepts custom
password = generatePassword() || userCustomPassword;
```

### **Activity Logging**
```typescript
// Quick-log 8oz water
await createActivity({
  type: 'HYDRATION',
  value: 8,
  unit: 'oz'
});

// Log run with distance
await createActivity({
  type: 'RUN',
  value: 3.5,
  unit: 'miles',
  notes: 'Morning jog, felt great!'
});
```

### **Activity Feed**
```typescript
// Real-time feed query
const recentActivities = await prisma.activity.findMany({
  include: { user: true },
  orderBy: { createdAt: 'desc' },
  take: 50
});

// Renders:
// "QuickTiger89 swam for 30 minutes - 1 hour ago"
```

### **Weight Privacy**
```typescript
// User can toggle
user.showWeightPublicly = true/false;

// When fetching weight data
if (weightLog.user.showWeightPublicly || isOwnProfile) {
  // Show weight
} else {
  // Hide weight
}
```

---

## **ğŸ“ Project Structure**

```
workout-logger/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ signup/route.ts
â”‚   â”‚   â”‚   â””â”€â”€ login/route.ts
â”‚   â”‚   â”œâ”€â”€ activities/
â”‚   â”‚   â”‚   â”œâ”€â”€ route.ts          # POST new activity
â”‚   â”‚   â”‚   â””â”€â”€ feed/route.ts     # GET activity feed
â”‚   â”‚   â”œâ”€â”€ hydration/
â”‚   â”‚   â”‚   â””â”€â”€ route.ts          # GET hydration stats
â”‚   â”‚   â””â”€â”€ weight/
â”‚   â”‚       â””â”€â”€ route.ts          # POST/GET weight logs
â”‚   â”œâ”€â”€ (pages)/
â”‚   â”‚   â”œâ”€â”€ page.tsx              # Homepage with feed
â”‚   â”‚   â”œâ”€â”€ profile/page.tsx      # User profile
â”‚   â”‚   â”œâ”€â”€ hydration/page.tsx    # Hydration dashboard
â”‚   â”‚   â””â”€â”€ auth/page.tsx         # Login/signup
â”‚   â””â”€â”€ layout.tsx                # Root layout
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ActivityFeed.tsx          # Main feed component
â”‚   â”œâ”€â”€ StatusBar.tsx             # "What are you up to?" input
â”‚   â”œâ”€â”€ HydrationChart.tsx        # Water intake chart
â”‚   â”œâ”€â”€ WeightTracker.tsx         # Weight logging & chart
â”‚   â””â”€â”€ QuickLogButton.tsx        # +8oz water button
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ prisma.ts                 # Prisma client
â”‚   â”œâ”€â”€ auth.ts                   # NextAuth config
â”‚   â””â”€â”€ utils.ts                  # Helper functions
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma             # Database schema
â””â”€â”€ package.json
```

---

## **ğŸš€ Development Flow**

### **Phase 1: Setup (Day 1)**
```bash
npx create-next-app@latest workout-logger
cd workout-logger
npm install prisma @prisma/client next-auth recharts bcrypt
npx prisma init
# Configure DATABASE_URL in .env
npx prisma db push
```

### **Phase 2: Auth (Days 2-3)**
- Build signup page with random username generator
- Implement NextAuth with credentials
- Create login/logout flow

### **Phase 3: Activity Logging (Days 4-6)**
- Status bar component
- Quick-log buttons
- API routes for creating activities
- Activity feed display

### **Phase 4: Charts (Days 7-9)**
- Hydration chart with Recharts
- Fetch and display data
- Time period filters

### **Phase 5: Weight Tracking (Days 10-11)**
- Weight logging UI
- Privacy toggle
- Weight chart

### **Phase 6: Polish (Days 12-14)**
- Responsive design
- Error handling
- Deploy to Vercel

---

## **ğŸ¯ User Flow Example**

1. **Sarah visits site** â†’ No account
2. **Clicks "Create Account"** â†’ Gets username "MightyEagle67" and password "blue-sky-2024"
3. **Logs in** â†’ Sees activity feed from coworkers
4. **Clicks "+8oz Water"** â†’ Activity posted: "MightyEagle67 drank 8oz water - just now"
5. **Types in status bar** â†’ "Ran 5 miles this morning!"
6. **Submits** â†’ Appears in feed: "MightyEagle67 ran 5 miles - just now"
7. **Checks hydration chart** â†’ Sees she's behind QuickTiger89 today
8. **Logs weight** â†’ Keeps it private for now

---

## **ğŸ’¡ Why This Architecture Works**

- **Single codebase** = Frontend + Backend together
- **Type safety** = TypeScript + Prisma catch errors early
- **No separate API** = API routes live with frontend
- **Easy deployment** = Push to GitHub â†’ Auto-deploys to Vercel
- **Scalable** = Can handle dozens of coworkers easily
- **Maintainable** = Clean structure, modern patterns

---

**Want me to start building it now?** I can create all the initial files and get you started coding in minutes.